<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clock + Weather Test</title>
<style>
  html, body {
    margin: 0;
    height: 100%;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: black;
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
    text-align: center;
  }

  #time {
    font-size: 10vw;
    font-weight: 600;
    line-height: 1;
  }

  #seconds {
    font-size: 4vw;
    vertical-align: super;
  }

  #date {
    font-size: 3vw;
    margin-top: 1vw;
  }

  #weather {
    font-size: 3vw;
    margin-top: 2vw;
  }
</style>
</head>
<body>
<div>
  <div id="time">--:--<span id="seconds">--</span></div>
  <div id="date">Loading date...</div>
  <div id="weather">Loading weather...</div>
</div>

<script>
  const timeEl = document.getElementById("time");
  const secEl = document.getElementById("seconds");
  const dateEl = document.getElementById("date");
  const weatherEl = document.getElementById("weather");

  // Clock function
  function updateClock() {
    const now = new Date();
    let hours = now.getHours();
    const minutes = now.getMinutes().toString().padStart(2, "0");
    const seconds = now.getSeconds().toString().padStart(2, "0");
    const ampm = hours >= 12 ? "PM" : "AM";
    hours = hours % 12 || 12;

    timeEl.firstChild.nodeValue = `${hours}:${minutes}`;
    secEl.textContent = seconds;
    dateEl.textContent = now.toDateString();
  }

  setInterval(updateClock, 1000);
  updateClock();

  // Weather function using wttr.in
  async function getWeather(zip = "01301") {
    try {
      // &u=f specifies US customary units (Fahrenheit)
      const res = await fetch(`https://wttr.in/${zip}?format=j1&u=f`);
      if (!res.ok) throw new Error("Failed to fetch weather");
      const data = await res.json();

      const current = data.current_condition[0];
      const tempF = current.temp_F; // Fahrenheit
      const condition = current.weatherDesc[0].value;

      weatherEl.textContent = `Current: ${tempF}Â°F, ${condition}`;
      console.log("Full wttr data:", data);
    } catch (err) {
      console.error(err);
      weatherEl.textContent = "Weather not available.";
    }
  }

  getWeather(); // fixed zip code
</script>
</body>
</html>
