<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>iPad Dashboard v4.0</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
      color: white;
      background-color: black;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    #time-wrapper {
      font-size: 120px;
      font-weight: 600;
      line-height: 1.1;
      text-shadow: 0 2px 10px rgba(0,0,0,0.8);
      white-space: nowrap;
    }

    #date {
      font-size: 40px;
      margin-top: 10px;
      text-shadow: 0 1px 8px rgba(0,0,0,0.7);
    }

    #weather {
      font-size: 60px;
      margin-top: 30px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.7);
      line-height: 1.2;
    }

    #version-badge {
      position: fixed;
      top: 12px;
      right: 12px;
      z-index: 9999;
      background: rgba(255,255,255,0.08);
      color: #fff;
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 13px;
      border: 1px solid rgba(255,255,255,0.04);
      box-shadow: 0 2px 6px rgba(0,0,0,0.6);
    }
  </style>
</head>
<body>
  <div id="time-wrapper">--:--:--</div>
  <div id="date">Loading...</div>
  <div id="weather">Loading weather...</div>
  <div id="version-badge">v4.0</div>

  <script>
    // Clock and date
    function updateTime() {
      const now = new Date();
      const hours = now.getHours() % 12 || 12;
      const minutes = ("0" + now.getMinutes()).slice(-2);
      const seconds = ("0" + now.getSeconds()).slice(-2);
      const ampm = now.getHours() >= 12 ? 'PM' : 'AM';
      document.getElementById('time-wrapper').innerText = `${hours}:${minutes}:${seconds} ${ampm}`;
      document.getElementById('date').innerText = now.toDateString();
    }
    updateTime();
    setInterval(updateTime, 1000);

    // Weather fetch from wttr.in
    function updateWeather() {
      fetch('https://wttr.in/Greenfield,MA?format=3')
        .then(r => r.text())
        .then(text => {
          // Translate emojis to plain English
          let translated = text
            .replace('â˜€ï¸', 'Sunny')
            .replace('â˜ï¸', 'Cloudy')
            .replace('ðŸŒ§ï¸', 'Rainy')
            .replace('â›ˆï¸', 'Stormy')
            .replace('ðŸŒ«ï¸', 'Foggy')
            .replace('â„ï¸', 'Snowy')
            .replace('ðŸŒ¬ï¸', 'Windy');
          document.getElementById('weather').innerText = `${text}  (${translated})`;
        })
        .catch(e => {
          document.getElementById('weather').innerText = 'Weather unavailable';
        });
    }
    updateWeather();
    // Refresh weather every 10 minutes
    setInterval(updateWeather, 10*60*1000);
  </script>
</body>
</html>
